---
/**
 * MobileNav - Responsive mobile navigation with hamburger menu
 * Uses astro-headless-ui Disclosure for accessible toggle behavior
 *
 * @example
 * ```astro
 * <MobileNav client:load>
 *   <a href="/">Home</a>
 *   <a href="/about">About</a>
 *   <a href="/services">Services</a>
 *   <a href="/contact">Contact</a>
 * </MobileNav>
 * ```
 */

import { Disclosure } from 'astro-headless-ui';

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<Disclosure class:list={['lg:hidden', className]}>
  <!-- Hamburger Button -->
  <Disclosure.Button
    class="btn btn-ghost btn-square"
    aria-label="Toggle mobile navigation"
  >
    {/* Hamburger Icon (hidden when menu open) */}
    <svg
      class="swap-off w-6 h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      aria-hidden="true"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16M4 18h16"
      />
    </svg>

    {/* Close Icon (visible when menu open) */}
    <svg
      class="swap-on w-6 h-6"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
      aria-hidden="true"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M6 18L18 6M6 6l12 12"
      />
    </svg>
  </Disclosure.Button>

  <!-- Mobile Menu Panel -->
  <Disclosure.Panel class="absolute top-16 left-0 right-0 bg-base-100 shadow-xl border-t border-base-300 z-50">
    <nav class="menu p-4 space-y-2">
      <slot />
    </nav>
  </Disclosure.Panel>
</Disclosure>

<style>
  /* Show/hide icons based on disclosure state */
  [aria-expanded="false"] .swap-on {
    display: none;
  }
  [aria-expanded="true"] .swap-off {
    display: none;
  }

  /* Style links inside mobile nav */
  nav a {
    @apply block px-4 py-3 rounded-lg text-base font-medium hover:bg-base-200 transition-colors;
  }
</style>
